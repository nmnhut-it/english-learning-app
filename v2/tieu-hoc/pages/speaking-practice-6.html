<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speaking Practice - Grade 6</title>
    <link rel="stylesheet" href="../css/shared.css">
    <style>
        .speaking-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .topic-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .topic-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--primary);
        }

        .topic-number {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .topic-title {
            font-size: 1.4rem;
            color: var(--text-dark);
            margin: 0;
        }

        .question-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            border-left: 4px solid var(--info);
        }

        .question-row {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .question-number {
            background: var(--info);
            color: white;
            min-width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .question-content {
            flex: 1;
        }

        .question-text {
            font-size: 1.1rem;
            color: var(--text-dark);
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .question-phonetic {
            font-size: 0.95rem;
            color: #e65100;
            font-style: italic;
            margin-bottom: 6px;
            padding: 4px 8px;
            background: #fff3e0;
            border-radius: 4px;
            display: inline-block;
        }

        .question-translation {
            font-size: 0.95rem;
            color: #666;
            font-style: italic;
        }

        .btn-speak {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .btn-speak:hover {
            background: #45a049;
            transform: scale(1.1);
        }

        .btn-speak:active {
            transform: scale(0.95);
        }

        .btn-speak.speaking {
            background: var(--danger);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .btn-speak svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .sample-answer {
            margin-top: 20px;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 8px;
            border: 2px solid #a5d6a7;
        }

        .sample-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #a5d6a7;
        }

        .sample-label {
            font-weight: 600;
            color: #2e7d32;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }

        .sample-paragraph {
            margin-bottom: 16px;
            padding: 12px;
            background: white;
            border-radius: 6px;
        }

        .sample-paragraph:last-child {
            margin-bottom: 0;
        }

        .sample-english {
            font-size: 1.05rem;
            color: #1b5e20;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .sample-phonetic {
            font-size: 0.95rem;
            color: #e65100;
            font-style: italic;
            margin-bottom: 6px;
            padding: 6px 10px;
            background: #fff3e0;
            border-radius: 4px;
            line-height: 1.6;
        }

        .sample-vietnamese {
            font-size: 0.95rem;
            color: #555;
            font-style: italic;
            line-height: 1.5;
        }

        .controls-bar {
            background: white;
            padding: 16px 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-group label {
            font-weight: 500;
            color: #666;
        }

        .control-group select,
        .control-group input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
        }

        .speed-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
        }

        .btn-stop-all {
            background: var(--danger);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-stop-all:hover {
            background: #d32f2f;
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .page-header h1 {
            color: var(--primary);
            margin-bottom: 8px;
        }

        .page-header p {
            color: #666;
            font-size: 1.1rem;
        }

        .instructions {
            background: #fff3e0;
            border-left: 4px solid var(--warning);
            padding: 16px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 24px;
        }

        .instructions h3 {
            color: #e65100;
            margin: 0 0 8px 0;
        }

        .instructions ul {
            margin: 0;
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 4px;
        }

        .legend {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed #ffcc80;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }

        .legend-english { background: #e3f2fd; border: 1px solid #90caf9; }
        .legend-phonetic { background: #fff3e0; border: 1px solid #ffcc80; }
        .legend-vietnamese { background: #f5f5f5; border: 1px solid #bdbdbd; }

        .intro-box {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 2px solid #64b5f6;
        }

        .intro-box h3 {
            color: #1565c0;
            margin: 0 0 12px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .intro-content {
            background: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .intro-text {
            font-size: 1.05rem;
            color: #1565c0;
            line-height: 1.8;
        }

        .intro-note {
            font-size: 0.9rem;
            color: #666;
            font-style: italic;
            padding-left: 12px;
            border-left: 3px solid #64b5f6;
        }

        @media (max-width: 600px) {
            .controls-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .btn-stop-all {
                margin-left: 0;
                justify-content: center;
            }

            .question-row {
                flex-wrap: wrap;
            }

            .legend {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="speaking-container">
        <div class="page-header">
            <h1>Speaking Practice - Grade 6</h1>
            <p>Luyện thi nói Tiếng Anh lớp 6 - HK1 Global Success</p>
        </div>

        <div class="instructions">
            <h3>Hướng dẫn sử dụng:</h3>
            <ul>
                <li>Nhấn nút <strong>loa</strong> để nghe câu hỏi hoặc câu trả lời mẫu</li>
                <li>Đọc <strong style="color: #e65100;">phiên âm tiếng Việt</strong> để biết cách phát âm</li>
                <li>Điều chỉnh <strong>tốc độ đọc</strong> theo khả năng nghe của bạn</li>
                <li>Chọn <strong>giọng đọc</strong> phù hợp (nên chọn giọng tiếng Anh)</li>
            </ul>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color legend-english"></div>
                    <span>Tiếng Anh</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-phonetic"></div>
                    <span>Phiên âm Việt</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-vietnamese"></div>
                    <span>Nghĩa tiếng Việt</span>
                </div>
            </div>
        </div>

        <div class="controls-bar">
            <div class="control-group">
                <label>Tốc độ:</label>
                <input type="range" id="speedRange" min="0.5" max="1.5" step="0.1" value="0.9">
                <span class="speed-value" id="speedValue">0.9x</span>
            </div>
            <div class="control-group">
                <label>Giọng đọc:</label>
                <select id="voiceSelect">
                    <option value="">Đang tải...</option>
                </select>
            </div>
            <button class="btn-stop-all" id="btnStopAll">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                    <rect x="6" y="6" width="12" height="12"/>
                </svg>
                Dừng tất cả
            </button>
        </div>

        <!-- Introduction Template -->
        <div class="intro-box">
            <h3>
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                Mẫu giới thiệu bản thân
            </h3>
            <div class="intro-content">
                <div class="intro-text">
                    <strong>Hello, my name is</strong> <em>[tên của bạn]</em>. <strong>I am</strong> <em>[tuổi]</em> <strong>years old.</strong>
                    <strong>I am a student in grade 6 at</strong> <em>[tên trường]</em> <strong>Lower Secondary School.</strong>
                    <strong>I like reading books, listening to music and playing</strong> <em>[môn thể thao]</em>.
                    <strong>In my free time, I also like watching TV and</strong> <em>[hoạt động khác]</em> <strong>with my friends.</strong>
                </div>
            </div>
            <div class="intro-note">
                Thay thế phần in nghiêng [...] bằng thông tin của bản thân
            </div>
            <div style="margin-top: 12px;">
                <button class="btn-speak" data-text="Hello, my name is Lan. I am eleven years old. I am a student in grade 6 at Dang Hung Phuoc Lower Secondary School. I like reading books, listening to music and playing badminton. In my free time, I also like watching TV and shopping with my friends." title="Nghe mẫu giới thiệu">
                    <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                </button>
                <span style="margin-left: 10px; color: #666;">Nghe mẫu</span>
            </div>
        </div>

        <!-- Topic 1: Your School -->
        <div class="topic-card">
            <div class="topic-header">
                <div class="topic-number">1</div>
                <h2 class="topic-title">Your School (Trường học của bạn)</h2>
            </div>

            <!-- Question 1 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">1</div>
                    <div class="question-content">
                        <div class="question-text">Which school do you go to?</div>
                        <div class="question-phonetic">Uých sku-ồ đu diu gâu tu?</div>
                        <div class="question-translation">Bạn học trường nào?</div>
                    </div>
                    <button class="btn-speak" data-text="Which school do you go to?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">2</div>
                    <div class="question-content">
                        <div class="question-text">Where is it?</div>
                        <div class="question-phonetic">Ue-ơ i-z ít?</div>
                        <div class="question-translation">Nó ở đâu?</div>
                    </div>
                    <button class="btn-speak" data-text="Where is it?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">3</div>
                    <div class="question-content">
                        <div class="question-text">How is it?</div>
                        <div class="question-phonetic">Hao i-z ít?</div>
                        <div class="question-translation">Nó như thế nào?</div>
                    </div>
                    <button class="btn-speak" data-text="How is it?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">4</div>
                    <div class="question-content">
                        <div class="question-text">How many students are there in your school?</div>
                        <div class="question-phonetic">Hao me-ni xtiu-đần-tsờ a đe-ơ in do sku-ồ?</div>
                        <div class="question-translation">Có bao nhiêu học sinh trong trường của bạn?</div>
                    </div>
                    <button class="btn-speak" data-text="How many students are there in your school?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 5 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">5</div>
                    <div class="question-content">
                        <div class="question-text">What are the students like?</div>
                        <div class="question-phonetic">Uót a đờ xtiu-đần-tsờ lai-kờ?</div>
                        <div class="question-translation">Học sinh như thế nào?</div>
                    </div>
                    <button class="btn-speak" data-text="What are the students like?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 6 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">6</div>
                    <div class="question-content">
                        <div class="question-text">Which subjects do you like best?</div>
                        <div class="question-phonetic">Uých sáp-jéc-tsờ đu diu lai-kờ bét?</div>
                        <div class="question-translation">Bạn thích môn học nào nhất?</div>
                    </div>
                    <button class="btn-speak" data-text="Which subjects do you like best?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Sample Answer for School -->
            <div class="sample-answer">
                <div class="sample-header">
                    <span class="sample-label">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                        Câu trả lời mẫu
                    </span>
                    <button class="btn-speak" data-text="I go to Dang Hung Phuoc Lower Secondary School. It is in Binh An hamlet. It is big and beautiful. There are about eight hundred students in my school. They are friendly and helpful. I like Music best." title="Nghe câu trả lời mẫu">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">I go to <strong>Dang Hung Phuoc Lower Secondary School</strong>.</div>
                    <div class="sample-phonetic">Ai gâu tu Đặng Hưng Phước Lâu-ơ Sé-kần-đơ-ri Sku-ồ.</div>
                    <div class="sample-vietnamese">Tôi học trường Trung học cơ sở Đặng Hưng Phước.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">It is in <strong>Binh An hamlet</strong>.</div>
                    <div class="sample-phonetic">Ít i-z in Bình An hăm-lét.</div>
                    <div class="sample-vietnamese">Trường ở ấp Bình An.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">It is <strong>big and beautiful</strong>.</div>
                    <div class="sample-phonetic">Ít i-z bíg en biu-ti-phồ.</div>
                    <div class="sample-vietnamese">Nó to và đẹp.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">There are about <strong>eight hundred students</strong> in my school.</div>
                    <div class="sample-phonetic">Đe-ơ a ơ-bao-tờ ây-tờ hăn-đrịt xtiu-đần-tsờ in mai sku-ồ.</div>
                    <div class="sample-vietnamese">Có khoảng tám trăm học sinh trong trường của tôi.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">They are <strong>friendly and helpful</strong>.</div>
                    <div class="sample-phonetic">Đây a phrén-li en hép-phồ.</div>
                    <div class="sample-vietnamese">Họ thân thiện và hay giúp đỡ.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">I like <strong>Music</strong> best.</div>
                    <div class="sample-phonetic">Ai lai-kờ Miu-zíc bét.</div>
                    <div class="sample-vietnamese">Tôi thích môn Âm nhạc nhất.</div>
                </div>
            </div>
        </div>

        <!-- Topic 2: Your House -->
        <div class="topic-card">
            <div class="topic-header">
                <div class="topic-number">2</div>
                <h2 class="topic-title">Your House (Nhà của bạn)</h2>
            </div>

            <!-- Question 1 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">1</div>
                    <div class="question-content">
                        <div class="question-text">Where do you live?</div>
                        <div class="question-phonetic">Ue-ơ đu diu líp?</div>
                        <div class="question-translation">Bạn sống ở đâu?</div>
                    </div>
                    <button class="btn-speak" data-text="Where do you live?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">2</div>
                    <div class="question-content">
                        <div class="question-text">How is your house?</div>
                        <div class="question-phonetic">Hao i-z do hao-sờ?</div>
                        <div class="question-translation">Nhà bạn như thế nào?</div>
                    </div>
                    <button class="btn-speak" data-text="How is your house?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">3</div>
                    <div class="question-content">
                        <div class="question-text">How many rooms are there in your house?</div>
                        <div class="question-phonetic">Hao me-ni rum-zờ a đe-ơ in do hao-sờ?</div>
                        <div class="question-translation">Có bao nhiêu phòng trong nhà bạn?</div>
                    </div>
                    <button class="btn-speak" data-text="How many rooms are there in your house?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">4</div>
                    <div class="question-content">
                        <div class="question-text">What are they?</div>
                        <div class="question-phonetic">Uót a đây?</div>
                        <div class="question-translation">Chúng là những phòng gì?</div>
                    </div>
                    <button class="btn-speak" data-text="What are they?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 5 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">5</div>
                    <div class="question-content">
                        <div class="question-text">Which room do you like best? Why?</div>
                        <div class="question-phonetic">Uých rum đu diu lai-kờ bét? Uai?</div>
                        <div class="question-translation">Bạn thích phòng nào nhất? Tại sao?</div>
                    </div>
                    <button class="btn-speak" data-text="Which room do you like best? Why?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Question 6 -->
            <div class="question-item">
                <div class="question-row">
                    <div class="question-number">6</div>
                    <div class="question-content">
                        <div class="question-text">Do you have any TV in your living room?</div>
                        <div class="question-phonetic">Đu diu hép é-ni Ti-Vi in do lí-ving rum?</div>
                        <div class="question-translation">Bạn có ti vi trong phòng khách không?</div>
                    </div>
                    <button class="btn-speak" data-text="Do you have any TV in your living room?" title="Nghe câu hỏi">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>
            </div>

            <!-- Sample Answer for House -->
            <div class="sample-answer">
                <div class="sample-header">
                    <span class="sample-label">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                        Câu trả lời mẫu
                    </span>
                    <button class="btn-speak" data-text="I live in the country house in Tien Giang. My house is big and beautiful. There are five rooms in my house. They are a living room, two bedrooms, a bathroom and a kitchen. I like my bedroom best because it is cozy and big. Yes, I do. I have a TV in my living room." title="Nghe câu trả lời mẫu">
                        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                    </button>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">I live in <strong>the country house in Tien Giang</strong>.</div>
                    <div class="sample-phonetic">Ai líp in đờ căn-tri hao-sờ in Tiền Giang.</div>
                    <div class="sample-vietnamese">Tôi sống ở nhà quê ở Tiền Giang.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">My house is <strong>big and beautiful</strong>.</div>
                    <div class="sample-phonetic">Mai hao-sờ i-z bíg en biu-ti-phồ.</div>
                    <div class="sample-vietnamese">Nhà tôi to và đẹp.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">There are <strong>five rooms</strong> in my house.</div>
                    <div class="sample-phonetic">Đe-ơ a phai-vờ rum-zờ in mai hao-sờ.</div>
                    <div class="sample-vietnamese">Có năm phòng trong nhà tôi.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">They are <strong>a living room, two bedrooms, a bathroom and a kitchen</strong>.</div>
                    <div class="sample-phonetic">Đây a ơ lí-ving rum, tu bét-rum-zờ, ơ bát-rum en ơ kít-chần.</div>
                    <div class="sample-vietnamese">Chúng là một phòng khách, hai phòng ngủ, một phòng tắm và một nhà bếp.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english">I like <strong>my bedroom</strong> best because it is <strong>cozy and big</strong>.</div>
                    <div class="sample-phonetic">Ai lai-kờ mai bét-rum bét bi-cóz ít i-z câu-zi en bíg.</div>
                    <div class="sample-vietnamese">Tôi thích phòng ngủ nhất vì nó ấm cúng và rộng.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english"><strong>Yes, I do.</strong> I have a TV in my living room.</div>
                    <div class="sample-phonetic">Yes, ai đu. Ai hép ơ Ti-Vi in mai lí-ving rum.</div>
                    <div class="sample-vietnamese">Có. Tôi có một cái ti vi trong phòng khách.</div>
                </div>
            </div>
        </div>

        <!-- Additional useful phrases -->
        <div class="topic-card">
            <div class="topic-header">
                <div class="topic-number" style="background: #9c27b0;">+</div>
                <h2 class="topic-title">Useful phrases (Câu nói hữu ích)</h2>
            </div>

            <div class="sample-answer" style="background: #f3e5f5; border-color: #ce93d8;">
                <div class="sample-paragraph">
                    <div class="sample-english"><strong>My family has ... members.</strong></div>
                    <div class="sample-phonetic">Mai phe-mơ-li hézờ ... mem-bờzờ.</div>
                    <div class="sample-vietnamese">Gia đình tôi có ... thành viên.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english"><strong>Who are they?</strong> - They are my father, my mother, my sister and me.</div>
                    <div class="sample-phonetic">Hu a đây? - Đây a mai pha-đờ, mai ma-đờ, mai xít-stờ en mi.</div>
                    <div class="sample-vietnamese">Họ là ai? - Họ là bố tôi, mẹ tôi, chị gái tôi và tôi.</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english"><strong>In my free time, I like ...</strong></div>
                    <div class="sample-phonetic">In mai phri tai-mờ, ai lai-kờ ...</div>
                    <div class="sample-vietnamese">Trong thời gian rảnh, tôi thích ...</div>
                </div>

                <div class="sample-paragraph">
                    <div class="sample-english"><strong>What is your favorite ...?</strong> - My favorite ... is ...</div>
                    <div class="sample-phonetic">Uót i-z do phây-vơ-rịt ...? - Mai phây-vơ-rịt ... i-z ...</div>
                    <div class="sample-vietnamese">... yêu thích của bạn là gì? - ... yêu thích của tôi là ...</div>
                </div>
            </div>
        </div>

        <!-- Back to home -->
        <div style="text-align: center; margin-top: 30px;">
            <a href="../index.html" style="color: var(--primary); text-decoration: none; font-weight: 500;">
                ← Quay về trang chủ
            </a>
        </div>
    </div>

    <script>
        // TTS Configuration
        const TTS = {
            synth: window.speechSynthesis,
            voices: [],
            currentUtterance: null,
            speed: 0.9,
            selectedVoice: null,

            init() {
                this.loadVoices();
                if (speechSynthesis.onvoiceschanged !== undefined) {
                    speechSynthesis.onvoiceschanged = () => this.loadVoices();
                }
                this.setupControls();
                this.setupButtons();
            },

            loadVoices() {
                this.voices = this.synth.getVoices();
                const select = document.getElementById('voiceSelect');
                select.innerHTML = '';

                const englishVoices = this.voices.filter(v => v.lang.startsWith('en'));

                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = '-- Chọn giọng đọc --';
                select.appendChild(defaultOption);

                englishVoices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    option.dataset.voiceName = voice.name;
                    select.appendChild(option);
                });

                const preferredVoices = ['Google US English', 'Microsoft Zira', 'Samantha', 'Karen', 'Google UK English Female'];
                for (const preferred of preferredVoices) {
                    const found = englishVoices.find(v => v.name.includes(preferred));
                    if (found) {
                        this.selectedVoice = found;
                        for (const opt of select.options) {
                            if (opt.dataset.voiceName === found.name) {
                                opt.selected = true;
                                break;
                            }
                        }
                        break;
                    }
                }

                if (!this.selectedVoice && englishVoices.length > 0) {
                    this.selectedVoice = englishVoices[0];
                    select.options[1].selected = true;
                }
            },

            setupControls() {
                const speedRange = document.getElementById('speedRange');
                const speedValue = document.getElementById('speedValue');
                speedRange.addEventListener('input', () => {
                    this.speed = parseFloat(speedRange.value);
                    speedValue.textContent = this.speed.toFixed(1) + 'x';
                });

                const voiceSelect = document.getElementById('voiceSelect');
                voiceSelect.addEventListener('change', () => {
                    const selectedIndex = voiceSelect.value;
                    if (selectedIndex !== '') {
                        const englishVoices = this.voices.filter(v => v.lang.startsWith('en'));
                        this.selectedVoice = englishVoices[parseInt(selectedIndex)];
                    }
                });

                document.getElementById('btnStopAll').addEventListener('click', () => {
                    this.stop();
                });
            },

            setupButtons() {
                document.querySelectorAll('.btn-speak').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const text = btn.dataset.text;
                        if (btn.classList.contains('speaking')) {
                            this.stop();
                        } else {
                            this.speak(text, btn);
                        }
                    });
                });
            },

            speak(text, button) {
                this.stop();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = this.speed;
                utterance.pitch = 1;
                utterance.volume = 1;

                if (this.selectedVoice) {
                    utterance.voice = this.selectedVoice;
                }

                button.classList.add('speaking');
                this.currentUtterance = utterance;

                utterance.onend = () => {
                    button.classList.remove('speaking');
                    this.currentUtterance = null;
                };

                utterance.onerror = () => {
                    button.classList.remove('speaking');
                    this.currentUtterance = null;
                };

                this.synth.speak(utterance);
            },

            stop() {
                this.synth.cancel();
                document.querySelectorAll('.btn-speak.speaking').forEach(btn => {
                    btn.classList.remove('speaking');
                });
                this.currentUtterance = null;
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            TTS.init();
        });
    </script>
</body>
</html>
